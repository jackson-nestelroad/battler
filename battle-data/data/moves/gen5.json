{
  "honeclaws": {
    "name": "Hone Claws",
    "category": "Status",
    "primary_type": "Dark",
    "pp": 15,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["Snatch"],
    "hit_effect": {
      "boosts": {
        "atk": 1,
        "acc": 1
      }
    }
  },
  "wideguard": {
    "name": "Wide Guard",
    "category": "Status",
    "primary_type": "Rock",
    "pp": 10,
    "accuracy": "exempt",
    "priority": 3,
    "target": "AllySide",
    "flags": ["NoMetronome", "Snatch"],
    "hit_effect": {
      "side_condition": "wideguard"
    },
    "effect": {
      "callbacks": {
        "on_prepare_hit": ["return func_call(any_mon_will_move_this_turn)"],
        "on_try_hit_side": ["add_volatile: $source stall"]
      }
    },
    "condition": {
      "duration": 1,
      "delegates": ["condition:weakenthroughprotectionmovebase"],
      "callbacks": {
        "on_side_start": ["log_single_turn: use_source with_target"],
        "on_try_hit": [
          "if !([alladjacent, alladjacentfoes] has $move.target):",
          ["return"],
          "log_activate: with_target",
          "return stop"
        ]
      }
    }
  },
  "guardsplit": {
    "name": "Guard Split",
    "category": "Status",
    "primary_type": "Psychic",
    "pp": 10,
    "accuracy": "exempt",
    "target": "Normal",
    "flags": ["Protect"],
    "effect": {
      "callbacks": {
        "on_hit": [
          "$def = ($target.stats.def + $source.stats.def) / 2",
          "$spd = ($target.stats.spd + $source.stats.spd) / 2",
          "$target.stats.def = $def",
          "$source.stats.def = $def",
          "$target.stats.spd = $spd",
          "$source.stats.spd = $spd",
          "log_activate: with_target with_source"
        ]
      }
    }
  },
  "powersplit": {
    "name": "Power Split",
    "category": "Status",
    "primary_type": "Psychic",
    "pp": 10,
    "accuracy": "exempt",
    "target": "Normal",
    "flags": ["Protect"],
    "effect": {
      "callbacks": {
        "on_hit": [
          "$atk = ($target.stats.atk + $source.stats.atk) / 2",
          "$spa = ($target.stats.spa + $source.stats.spa) / 2",
          "$target.stats.atk = $atk",
          "$source.stats.atk = $atk",
          "$target.stats.spa = $spa",
          "$source.stats.spa = $spa",
          "log_activate: with_target with_source"
        ]
      }
    }
  },
  "wonderroom": {
    "name": "Wonder Room",
    "category": "Status",
    "primary_type": "Psychic",
    "pp": 10,
    "accuracy": "exempt",
    "target": "All",
    "flags": ["Mirror"],
    "hit_effect": {
      "pseudo_weather": "wonderroom"
    },
    "condition": {
      "duration": 5,
      "callbacks": {
        "on_field_start": ["log_field_start: with_source"],
        "on_field_restart": ["remove_pseudo_weather: $this.id", "return true"],
        "on_field_end": ["log_field_end"],
        "on_calculate_stat": [
          "if $name == def:",
          ["return $target.stats.spd"],
          "if $name == spd:",
          ["return $target.stats.def"]
        ],
        "on_modify_boosts": [
          "# Moves that override the offensive stat to be a defense stat use the boosts for the swapped stat.",
          "if $effect.is_defined and $effect.is_move and $effect.source == $target:",
          [
            "if $effect.override_offensive_stat == def:",
            ["$boosts.def = $boosts.spd"],
            "if $effect.override_offensive_stat == spd:",
            ["$boosts.spd = $boosts.def"]
          ],
          "return $boosts"
        ]
      }
    }
  },
  "psyshock": {
    "name": "Psyshock",
    "category": "Special",
    "primary_type": "Psychic",
    "pp": 10,
    "accuracy": 100,
    "base_power": 80,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "override_defensive_stat": "def"
  },
  "venoshock": {
    "name": "Venoshock",
    "category": "Special",
    "primary_type": "Poison",
    "pp": 10,
    "accuracy": 100,
    "base_power": 65,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "effect": {
      "callbacks": {
        "on_move_base_power": [
          "if [psn, tox] has $target.status:",
          ["return $move.base_power * 2"]
        ]
      }
    }
  },
  "autotomize": {
    "name": "Autotomize",
    "category": "Status",
    "primary_type": "Steel",
    "pp": 15,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["Snatch"],
    "hit_effect": {
      "boosts": {
        "spe": 2
      }
    },
    "effect": {
      "callbacks": {
        "on_try_hit": ["return func_call(can_boost: $target 'spe:2')"],
        "on_hit": ["decrease_weight: $target 1000", "log_start"]
      }
    }
  },
  "ragepowder": {
    "name": "Rage Powder",
    "category": "Status",
    "primary_type": "Bug",
    "pp": 20,
    "accuracy": "exempt",
    "priority": 2,
    "target": "User",
    "flags": ["FailCopycat", "NoAssist", "NoMetronome", "Powder"],
    "effect": {
      "delegates": "move:followme"
    },
    "condition": {
      "delegates": "movecondition:followme"
    }
  },
  "telekinesis": {
    "name": "Telekinesis",
    "category": "Status",
    "primary_type": "Psychic",
    "pp": 15,
    "accuracy": "exempt",
    "target": "Normal",
    "flags": ["Gravity", "Mirror", "Protect", "Reflectable"],
    "effect": {
      "callbacks": {
        "on_try_use_move": [
          "if func_call(has_pseudo_weather: gravity):",
          ["do_not_animate_last_move", "log_cant", "return stop"]
        ]
      }
    },
    "hit_effect": {
      "volatile_status": "telekinesis"
    },
    "condition": {
      "duration": 3,
      "callbacks": {
        "on_start": [
          "# Check base species and the true base species (e.g., Diglett for Diglett-Alola) for immunity.",
          "$base_species = func_call(base_species: $target)",
          "if func_call(species_has_flag: $base_species notelekinesis) or func_call(species_has_flag: $target.base_species notelekinesis):",
          ["log_immune: $target", "return false"],
          "if func_call(has_volatile: $target smackdown) or func_call(has_volatile: $target ingrain):",
          ["return false"],
          "log_start"
        ],
        "is_grounded": ["return false"],
        "on_accuracy_exempt": ["if !$move.ohko:", ["return false"]],
        "on_update": [
          "# Handle the case when Gengar Mega Evolves.",
          "if !$mon.transformed and func_call(species_has_flag: $mon.base_species notelekinesis):",
          ["remove_volatile: $mon $this.id"]
        ],
        "on_end": ["log_end"]
      }
    }
  },
  "magicroom": {
    "name": "Magic Room",
    "category": "Status",
    "primary_type": "Psychic",
    "pp": 10,
    "accuracy": "exempt",
    "target": "All",
    "flags": ["Mirror"],
    "hit_effect": {
      "pseudo_weather": "magicroom"
    },
    "condition": {
      "duration": 5,
      "callbacks": {
        "on_field_start": [
          "log_field_start",
          "foreach $mon in func_call(all_active_mons_in_speed_order):",
          ["end_item: $mon silent"]
        ],
        "on_field_restart": ["remove_pseudo_weather: $this.id", "return true"],
        "suppress_mon_item": ["if $effect_state.started:", ["return true"]],
        "on_prevent_used_items": ["return true"],
        "on_field_end": [
          "log_field_end",
          "foreach $mon in func_call(all_active_mons_in_speed_order):",
          ["start_item: $mon silent"]
        ]
      }
    }
  },
  "smackdown": {
    "name": "Smack Down",
    "category": "Physical",
    "primary_type": "Rock",
    "pp": 15,
    "accuracy": 100,
    "base_power": 50,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "hit_effect": {
      "volatile_status": "smackdown"
    },
    "condition": {
      "no_copy": true,
      "callbacks": {
        "on_start": [
          "if !func_call(add_volatile: $target knockdown):",
          ["return false"],
          "log_start"
        ],
        "on_restart": [
          "run_event_on_mon_volatile: $this.id Start",
          "return true"
        ],
        "is_grounded": ["if $effect_state.started:", ["return true"]]
      }
    }
  },
  "stormthrow": {
    "name": "Storm Throw",
    "category": "Physical",
    "primary_type": "Fighting",
    "pp": 10,
    "accuracy": 100,
    "base_power": 60,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "will_crit": true
  },
  "flameburst": {
    "name": "Flame Burst",
    "category": "Special",
    "primary_type": "Fire",
    "pp": 15,
    "accuracy": 100,
    "base_power": 70,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "effect": {
      "callbacks": {
        "on_hit": [
          "foreach $mon in func_call(adjacent_allies: $target):",
          ["damage: $mon expr($mon.base_max_hp / 16) $this.condition"]
        ],
        "on_after_substitute_damage": ["run_event_on_move: Hit"]
      }
    }
  },
  "sludgewave": {
    "name": "Sludge Wave",
    "category": "Special",
    "primary_type": "Poison",
    "pp": 10,
    "accuracy": 100,
    "base_power": 95,
    "target": "AllAdjacent",
    "flags": ["Mirror", "Protect"],
    "secondary_effects": [{ "chance": "10%", "target": { "status": "psn" } }]
  },
  "quiverdance": {
    "name": "Quiver Dance",
    "category": "Status",
    "primary_type": "Bug",
    "pp": 20,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["Dance", "Snatch"],
    "hit_effect": {
      "boosts": {
        "spa": 1,
        "spd": 1,
        "spe": 1
      }
    }
  },
  "heavyslam": {
    "name": "Heavy Slam",
    "category": "Physical",
    "primary_type": "Steel",
    "pp": 10,
    "accuracy": 100,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "max_move": { "base_power": 130 },
    "effect": {
      "callbacks": {
        "on_move_base_power": [
          "$target_weight = $target.weight",
          "$source_weight = $source.weight",
          "if $source_weight >= $target_weight * 5:",
          ["return 120"],
          "if $source_weight >= $target_weight * 4:",
          ["return 100"],
          "if $source_weight >= $target_weight * 3:",
          ["return 80"],
          "if $source_weight >= $target_weight * 2:",
          ["return 60"],
          "return 40"
        ]
      }
    }
  },
  "synchronoise": {
    "name": "Synchronoise",
    "category": "Special",
    "primary_type": "Psychic",
    "pp": 10,
    "accuracy": 100,
    "base_power": 120,
    "target": "AllAdjacent",
    "flags": ["Mirror", "Protect"],
    "effect": {
      "callbacks": {
        "on_try_immunity": [
          "if func_call(has_any_type: $target $source.effective_types):",
          ["return true"]
        ]
      }
    }
  },
  "electroball": {
    "name": "Electro Ball",
    "category": "Special",
    "primary_type": "Electric",
    "pp": 10,
    "accuracy": 100,
    "target": "Normal",
    "flags": ["Bullet", "Mirror", "Protect"],
    "max_move": { "base_power": 130 },
    "effect": {
      "callbacks": {
        "on_move_base_power": [
          "$target_speed = func_call(get_stat: $target spe)",
          "$source_speed = func_call(get_stat: $source spe)",
          "if $source_speed == 0:",
          ["$ratio = 0"],
          "else:",
          ["$ratio = $source_speed / $target_speed"],
          "if $ratio < 1:",
          ["return 40"],
          "if $ratio < 2:",
          ["return 60"],
          "if $ratio < 3:",
          ["return 80"],
          "if $ratio < 4:",
          ["return 120"],
          "return 150"
        ]
      }
    }
  },
  "soak": {
    "name": "Soak",
    "category": "Status",
    "primary_type": "Water",
    "pp": 20,
    "accuracy": 100,
    "target": "Normal",
    "flags": ["Mirror", "Protect", "Reflectable"],
    "effect": {
      "callbacks": {
        "on_hit": [
          "if $target.types == [water]:",
          ["log_fail: $target $this.condition", "return"],
          "if !func_call(set_types: $target [water]):",
          ["log_fail: $target $this.condition", "return false"]
        ]
      }
    }
  },
  "flamecharge": {
    "name": "Flame Charge",
    "category": "Physical",
    "primary_type": "Fire",
    "pp": 20,
    "accuracy": 100,
    "base_power": 50,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "secondary_effects": [
      {
        "user": {
          "boosts": {
            "spe": 1
          }
        }
      }
    ]
  },
  "coil": {
    "name": "Coil",
    "category": "Status",
    "primary_type": "Poison",
    "pp": 20,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["Snatch"],
    "hit_effect": {
      "boosts": {
        "atk": 1,
        "def": 1,
        "acc": 1
      }
    }
  },
  "lowsweep": {
    "name": "Low Sweep",
    "category": "Physical",
    "primary_type": "Fighting",
    "pp": 20,
    "accuracy": 100,
    "base_power": 65,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "secondary_effects": [
      {
        "target": {
          "boosts": {
            "spe": -1
          }
        }
      }
    ]
  },
  "acidspray": {
    "name": "Acid Spray",
    "category": "Special",
    "primary_type": "Poison",
    "pp": 20,
    "accuracy": 100,
    "base_power": 40,
    "target": "Normal",
    "flags": ["Bullet", "Mirror", "Protect"],
    "secondary_effects": [
      {
        "target": {
          "boosts": {
            "spd": -2
          }
        }
      }
    ]
  },
  "foulplay": {
    "name": "Foul Play",
    "category": "Physical",
    "primary_type": "Dark",
    "pp": 15,
    "accuracy": 100,
    "base_power": 95,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "override_offensive_mon": "Target"
  },
  "simplebeam": {
    "name": "Simple Beam",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 15,
    "accuracy": 100,
    "target": "Normal",
    "flags": ["Mirror", "Protect", "Reflectable"],
    "effect": {
      "callbacks": {
        "on_try_hit": [
          "if func_call(ability_has_flag: $target.ability permanent) or func_call(ability_has_flag: $target.ability nosimplebeam):",
          ["return false"]
        ],
        "on_hit": [
          "if !func_call(set_ability: $target simple):",
          ["return false"]
        ]
      }
    }
  },
  "entrainment": {
    "name": "Entrainment",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 15,
    "accuracy": 100,
    "target": "Normal",
    "flags": ["Mirror", "Protect", "Reflectable"],
    "effect": {
      "callbacks": {
        "on_try_hit": [
          "if $target == $source or $target.dynamaxed:",
          ["return false"],
          "if $target.ability == $source.ability or func_call(ability_has_flag: $target.ability permanent) or func_call(ability_has_flag: $target.ability noentrainmenttarget) or func_call(ability_has_flag: $source.ability noentrainment):",
          ["return false"]
        ],
        "on_hit": [
          "if !func_call(set_ability: $target $source.ability):",
          ["return false"]
        ]
      }
    }
  },
  "afteryou": {
    "name": "After You",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 15,
    "accuracy": "exempt",
    "target": "Normal",
    "flags": ["BypassMaxGuard", "BypassSubstitute", "NoMetronome"],
    "effect": {
      "callbacks": {
        "on_hit": [
          "$action = func_call(pending_move_action_this_turn: $target)",
          "if !$action:",
          ["return false"],
          "prioritize_move: $target",
          "log_activate: with_target"
        ]
      }
    }
  },
  "round": {
    "name": "Round",
    "category": "Special",
    "primary_type": "Normal",
    "pp": 15,
    "accuracy": 100,
    "base_power": 60,
    "target": "Normal",
    "flags": ["BypassSubstitute", "Mirror", "Protect", "Sound"],
    "effect": {
      "callbacks": {
        "on_move_base_power": [
          "if $move.effect_state.source_effect.is_defined and $move.effect_state.source_effect.id == $this.id:",
          ["return $move.base_power * 2"]
        ],
        "on_try_use_move": [
          "foreach $action in func_call(pending_move_actions_this_turn):",
          [
            "if $action.id == $this.id:",
            ["prioritize_move: $action.mon $this", "return"]
          ]
        ]
      }
    }
  },
  "echoedvoice": {
    "name": "Echoed Voice",
    "category": "Special",
    "primary_type": "Normal",
    "pp": 15,
    "accuracy": 100,
    "base_power": 40,
    "target": "Normal",
    "flags": ["BypassSubstitute", "Mirror", "Protect", "Sound"],
    "effect": {
      "callbacks": {
        "on_move_base_power": [
          "$pseudo_weather_effect_state = func_call(pseudo_weather_effect_state: $this.id)",
          "if !$pseudo_weather_effect_state:",
          ["return $move.base_power"],
          "return $move.base_power * $pseudo_weather_effect_state.multiplier"
        ],
        "on_try_move": ["add_pseudo_weather: $this.id"]
      }
    },
    "condition": {
      "duration": 2,
      "callbacks": {
        "on_field_start": ["$effect_state.multiplier = 1"],
        "on_field_restart": [
          "# We are in a different turn if the duration changed.",
          "if $effect_state.duration != 2:",
          [
            "$effect_state.duration = 2",
            "if $effect_state.multiplier < 5:",
            ["$effect_state.multiplier = $effect_state.multiplier + 1"]
          ]
        ]
      }
    }
  },
  "chipaway": {
    "name": "Chip Away",
    "category": "Physical",
    "primary_type": "Normal",
    "pp": 20,
    "accuracy": 100,
    "base_power": 70,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "ignore_defensive": true,
    "ignore_evasion": true
  },
  "clearsmog": {
    "name": "Clear Smog",
    "category": "Special",
    "primary_type": "Poison",
    "pp": 15,
    "accuracy": "exempt",
    "base_power": 50,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "effect": {
      "callbacks": {
        "on_hit": ["clear_boosts: $target"]
      }
    }
  },
  "storedpower": {
    "name": "Stored Power",
    "category": "Special",
    "primary_type": "Psychic",
    "pp": 10,
    "accuracy": 100,
    "base_power": 20,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "max_move": { "base_power": 130 },
    "effect": {
      "callbacks": {
        "on_move_base_power": [
          "return $move.base_power + 20 * $source.positive_boosts"
        ]
      }
    }
  },
  "quickguard": {
    "name": "Quick Guard",
    "category": "Status",
    "primary_type": "Fighting",
    "pp": 15,
    "accuracy": "exempt",
    "priority": 3,
    "target": "AllySide",
    "flags": ["NoMetronome", "Snatch"],
    "hit_effect": {
      "side_condition": "quickguard"
    },
    "effect": {
      "callbacks": {
        "on_prepare_hit": ["return func_call(any_mon_will_move_this_turn)"],
        "on_try_hit_side": ["add_volatile: $source stall"]
      }
    },
    "condition": {
      "duration": 1,
      "delegates": ["condition:weakenthroughprotectionmovebase"],
      "callbacks": {
        "on_side_start": ["log_single_turn: use_source with_target"],
        "on_try_hit": [
          "if $move.priority <= 0:",
          ["return"],
          "log_activate: with_target",
          "return stop"
        ]
      }
    }
  },
  "allyswitch": {
    "name": "Ally Switch",
    "category": "Status",
    "primary_type": "Psychic",
    "pp": 15,
    "accuracy": "exempt",
    "priority": 2,
    "target": "User",
    "flags": ["BypassMaxGuard"],
    "effect": {
      "callbacks": {
        "on_prepare_hit": ["return func_call(add_volatile: $user $this.id)"],
        "on_try_hit": [
          "# There must be a corresponding position to switch to (i.e., player has more than one Mon).",
          "$active_positions = $target.player.total_active_positions",
          "if $active_positions <= 1:",
          ["return false"],
          "# Fail if Mon is in the middle.",
          "if $active_positions % 2 == 1 and $target.active_position == func_call(floor: expr($active_positions / 2)):",
          ["return false"]
        ],
        "on_hit": [
          "$position = $target.player.total_active_positions - $target.active_position - 1",
          "return func_call(swap_position: $target $position)"
        ]
      }
    },
    "condition": {
      "duration": 2,
      "callbacks": {
        "on_start": ["$effect_state.counter = 3"],
        "on_restart": [
          "if !func_call(chance: $effect_state.counter):",
          ["remove_volatile: $target $this.id no_events", "return false"],
          "if $effect_state.counter < 729:",
          ["$effect_state.counter = $effect_state.counter * 3"],
          "$effect_state.duration = 2",
          "return true"
        ]
      }
    }
  },
  "scald": {
    "name": "Scald",
    "category": "Special",
    "primary_type": "Water",
    "pp": 15,
    "accuracy": 100,
    "base_power": 80,
    "target": "Normal",
    "flags": ["Mirror", "Protect", "Thawing", "ThawsTarget"],
    "secondary_effects": [{ "chance": "30%", "target": { "status": "brn" } }]
  },
  "shellsmash": {
    "name": "Shell Smash",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 15,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["Snatch"],
    "hit_effect": {
      "boosts": {
        "def": -1,
        "spd": -1,
        "atk": 2,
        "spa": 2,
        "spe": 2
      }
    }
  },
  "healpulse": {
    "name": "Heal Pulse",
    "category": "Status",
    "primary_type": "Psychic",
    "pp": 10,
    "accuracy": "exempt",
    "target": "Any",
    "flags": ["Distance", "Heal", "Protect", "Pulse", "Reflectable"],
    "effect": {
      "callbacks": {
        "on_hit": [
          "$multiplier = 1/2",
          "if $move.effect_state.multiplier.is_defined:",
          ["$multiplier = $move.effect_state.multiplier"],
          "return func_call(heal: $target expr($target.base_max_hp * $multiplier)) > 0"
        ]
      }
    }
  },
  "hex": {
    "name": "Hex",
    "category": "Special",
    "primary_type": "Ghost",
    "pp": 10,
    "accuracy": 100,
    "base_power": 65,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "effect": {
      "callbacks": {
        "on_move_base_power": [
          "if $target.status.is_defined or $target.is_asleep:",
          ["return $move.base_power * 2"]
        ]
      }
    }
  },
  "skydrop": {
    "name": "Sky Drop",
    "category": "Physical",
    "primary_type": "Flying",
    "pp": 10,
    "accuracy": 100,
    "base_power": 60,
    "target": "Any",
    "flags": [
      "Charge",
      "Contact",
      "Distance",
      "FailInstruct",
      "Gravity",
      "Mirror",
      "NoAssist",
      "NoSleepTalk",
      "Protect"
    ],
    "effect": {
      "callbacks": {
        "on_use_move": [
          "if !func_call(has_volatile: $user $this.id):",
          ["$move.accuracy = exempt", "remove_move_flag: $move contact"]
        ],
        "on_try_immunity": [
          "if func_call(has_volatile: $source $this.id):",
          ["if func_call(has_type: $target flying):", ["return false"]],
          "else:",
          ["if $target.weight >= 2000:", ["return false"]]
        ],
        "on_try_hit": [
          "if func_call(has_volatile: $source $this.id):",
          [
            "# Ensure we are targeting the original target.",
            "$immobilizing_effect_state = func_call(volatile_status_state: $source immobilizingmove)",
            "if !$immobilizing_effect_state or $target != $immobilizing_effect_state.source:",
            ["return false"],
            "remove_volatile: $source immobilizingmove"
          ],
          "else:",
          [
            "if $target.is_behind_substitute or func_call(is_ally: $source $target):",
            ["return false"],
            "log_prepare_move: $target",
            "add_volatile: $source immobilizingmove use_target_as_source",
            "return stop"
          ]
        ],
        "on_move_failed": ["remove_volatile: $user $this.id"]
      }
    },
    "condition": {
      "duration": 2,
      "callbacks": {
        "is_away_from_field": ["return true"],
        "on_start": ["add_volatile: $target fly link"]
      }
    }
  },
  "shiftgear": {
    "name": "Shift Gear",
    "category": "Status",
    "primary_type": "Steel",
    "pp": 10,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["Snatch"],
    "hit_effect": {
      "boosts": {
        "atk": 2,
        "spe": 2
      }
    }
  },
  "circlethrow": {
    "name": "Circle Throw",
    "category": "Physical",
    "primary_type": "Fighting",
    "pp": 10,
    "accuracy": 90,
    "base_power": 60,
    "priority": -6,
    "target": "Normal",
    "flags": ["Contact", "FailCopycat", "Mirror", "NoAssist", "Protect"],
    "hit_effect": {
      "force_switch": true
    }
  },
  "incinerate": {
    "name": "Incinerate",
    "category": "Special",
    "primary_type": "Fire",
    "pp": 15,
    "accuracy": 100,
    "base_power": 60,
    "target": "AllAdjacentFoes",
    "flags": ["Mirror", "Protect"],
    "effect": {
      "callbacks": {
        "on_hit": [
          "$item = $target.item",
          "if $item.is_defined and (func_call(item_has_flag: $item berry) or func_call(item_has_flag: $item gem)):",
          ["take_item: $target"]
        ]
      }
    }
  },
  "quash": {
    "name": "Quash",
    "category": "Status",
    "primary_type": "Dark",
    "pp": 15,
    "accuracy": 100,
    "target": "Normal",
    "flags": ["Mirror", "NoMetronome", "Protect"],
    "effect": {
      "callbacks": {
        "on_hit": [
          "if $format.mons_per_side == 1:",
          ["return false"],
          "if !func_call(will_move_this_turn: $target):",
          ["return false"],
          "deprioritize_move: $target",
          "log_activate: with_target"
        ]
      }
    }
  },
  "acrobatics": {
    "name": "Acrobatics",
    "category": "Physical",
    "primary_type": "Flying",
    "pp": 15,
    "accuracy": 100,
    "base_power": 55,
    "target": "Any",
    "flags": ["Contact", "Distance", "Mirror", "Protect"],
    "effect": {
      "callbacks": {
        "on_move_base_power": [
          "if !$source.item:",
          ["return $move.base_power * 2"]
        ]
      }
    }
  },
  "reflecttype": {
    "name": "Reflect Type",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 15,
    "accuracy": "exempt",
    "target": "Normal",
    "flags": ["BypassSubstitute", "Protect"],
    "effect": {
      "callbacks": {
        "on_hit": [
          "return func_call(set_types: $target $source.effective_types)"
        ]
      }
    }
  },
  "retaliate": {
    "name": "Retaliate",
    "category": "Physical",
    "primary_type": "Normal",
    "pp": 5,
    "accuracy": 100,
    "base_power": 70,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "effect": {
      "callbacks": {
        "on_source_base_power": [
          "if $source.player.mon_fainted_last_turn:",
          ["return $base_power * 2"]
        ]
      }
    }
  },
  "finalgambit": {
    "name": "Final Gambit",
    "category": "Special",
    "primary_type": "Fighting",
    "pp": 5,
    "accuracy": 100,
    "target": "Normal",
    "flags": ["NoParentalBond", "Protect"],
    "self_destruct": "ifhit",
    "effect": {
      "callbacks": {
        "on_move_damage": ["return $source.hp"]
      }
    }
  },
  "bestow": {
    "name": "Bestow",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 15,
    "accuracy": "exempt",
    "target": "Normal",
    "flags": [
      "BypassSubstitute",
      "FailCopycat",
      "Mirror",
      "NoAssist",
      "NoMetronome"
    ],
    "effect": {
      "callbacks": {
        "on_try_hit": [
          "if !$source.item:",
          ["return false"],
          "if !func_call(set_item: $target $source.item dry_run):",
          ["return false"]
        ],
        "on_hit": [
          "$item = func_call(take_item: $target)",
          "if !$item:",
          ["return false"],
          "return func_call(set_item: $target $item)"
        ]
      }
    }
  },
  "inferno": {
    "name": "Inferno",
    "category": "Special",
    "primary_type": "Fire",
    "pp": 5,
    "accuracy": 50,
    "base_power": 100,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "secondary_effects": [
      {
        "target": {
          "status": "brn"
        }
      }
    ]
  },
  "waterpledge": {
    "name": "Water Pledge",
    "category": "Special",
    "primary_type": "Water",
    "pp": 10,
    "accuracy": 100,
    "base_power": 80,
    "target": "Normal",
    "flags": ["Mirror", "PledgeCombo", "Protect"],
    "effect": {
      "delegates": ["condition:pledgemovebase"],
      "callbacks": {
        "on_use_move": [
          "if !$move.effect_state.source_effect:",
          ["return"],
          "if $move.effect_state.source_effect.id == grasspledge:",
          [
            "$move.force_stab = true",
            "$move.type = grass",
            "$move.hit_effect = func_call(hit_effect)",
            "$move.hit_effect.side_condition = grasspledge"
          ],
          "if $move.effect_state.source_effect.id == firepledge:",
          [
            "$move.force_stab = true",
            "$move.type = water",
            "$move.hit_effect = func_call(hit_effect)",
            "$move.hit_effect.side_condition = waterpledge"
          ]
        ]
      }
    },
    "condition": {
      "duration": 4,
      "callbacks": {
        "on_side_start": ["log_side_start"],
        "on_side_end": ["log_side_end"],
        "on_use_move": [
          "if $move.id == secretpower:",
          ["return"],
          "$secondary_effects = []",
          "foreach $secondary in $move.secondary_effects:",
          [
            "if func_call(has_ability: $user serenegrace) and $secondary.target.volatile_status == flinch:",
            ["continue"],
            "if $secondary.chance.is_defined:",
            ["$secondary.chance = $secondary.chance * 2"],
            "$secondary_effects = func_call(append: $secondary_effects $secondary)"
          ],
          "$move.secondary_effects = $secondary_effects",
          "if $move.user_effect_chance.is_defined:",
          ["$move.user_effect_chance = $move.user_effect_chance * 2"]
        ]
      }
    }
  },
  "firepledge": {
    "name": "Fire Pledge",
    "category": "Special",
    "primary_type": "Fire",
    "pp": 10,
    "accuracy": 100,
    "base_power": 80,
    "target": "Normal",
    "flags": ["Mirror", "PledgeCombo", "Protect"],
    "effect": {
      "delegates": ["condition:pledgemovebase"],
      "callbacks": {
        "on_use_move": [
          "if !$move.effect_state.source_effect:",
          ["return"],
          "if $move.effect_state.source_effect.id == grasspledge:",
          [
            "$move.force_stab = true",
            "$move.type = fire",
            "$move.hit_effect = func_call(hit_effect)",
            "$move.hit_effect.side_condition = firepledge"
          ],
          "if $move.effect_state.source_effect.id == waterpledge:",
          [
            "$move.force_stab = true",
            "$move.type = water",
            "$move.hit_effect = func_call(hit_effect)",
            "$move.hit_effect.side_condition = waterpledge"
          ]
        ]
      }
    },
    "condition": {
      "duration": 4,
      "callbacks": {
        "on_side_start": ["log_side_start"],
        "on_side_end": ["log_side_end"],
        "on_residual": [
          "if !func_call(has_type: $target fire):",
          ["damage: $target expr($target.base_max_hp / 8)"]
        ]
      }
    }
  },
  "grasspledge": {
    "name": "Grass Pledge",
    "category": "Special",
    "primary_type": "Grass",
    "pp": 10,
    "accuracy": 100,
    "base_power": 80,
    "target": "Normal",
    "flags": ["Mirror", "PledgeCombo", "Protect"],
    "effect": {
      "delegates": ["condition:pledgemovebase"],
      "callbacks": {
        "on_use_move": [
          "if !$move.effect_state.source_effect:",
          ["return"],
          "if $move.effect_state.source_effect.id == firepledge:",
          [
            "$move.force_stab = true",
            "$move.type = fire",
            "$move.hit_effect = func_call(hit_effect)",
            "$move.hit_effect.side_condition = firepledge"
          ],
          "if $move.effect_state.source_effect.id == waterpledge:",
          [
            "$move.force_stab = true",
            "$move.type = grass",
            "$move.hit_effect = func_call(hit_effect)",
            "$move.hit_effect.side_condition = grasspledge"
          ]
        ]
      }
    },
    "condition": {
      "duration": 4,
      "callbacks": {
        "on_side_start": ["log_side_start"],
        "on_side_end": ["log_side_end"],
        "on_modify_spe": ["return $spe / 4"]
      }
    }
  },
  "voltswitch": {
    "name": "Volt Switch",
    "category": "Special",
    "primary_type": "Electric",
    "pp": 20,
    "accuracy": 100,
    "base_power": 70,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "user_switch": true
  },
  "strugglebug": {
    "name": "Struggle Bug",
    "category": "Special",
    "primary_type": "Bug",
    "pp": 20,
    "accuracy": 100,
    "base_power": 50,
    "target": "AllAdjacentFoes",
    "flags": ["Mirror", "Protect"],
    "secondary_effects": [
      {
        "target": {
          "boosts": {
            "spa": -1
          }
        }
      }
    ]
  },
  "bulldoze": {
    "name": "Bulldoze",
    "category": "Physical",
    "primary_type": "Ground",
    "pp": 20,
    "accuracy": 100,
    "base_power": 60,
    "target": "AllAdjacent",
    "flags": ["Mirror", "Protect"],
    "secondary_effects": [
      {
        "target": {
          "boosts": {
            "spe": -1
          }
        }
      }
    ]
  },
  "frostbreath": {
    "name": "Frost Breath",
    "category": "Special",
    "primary_type": "Ice",
    "pp": 10,
    "accuracy": 90,
    "base_power": 60,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "will_crit": true
  },
  "dragontail": {
    "name": "Dragon Tail",
    "category": "Physical",
    "primary_type": "Dragon",
    "pp": 10,
    "accuracy": 90,
    "base_power": 60,
    "priority": -6,
    "target": "Normal",
    "flags": ["Contact", "FailCopycat", "Mirror", "NoAssist", "Protect"],
    "hit_effect": {
      "force_switch": true
    }
  },
  "workup": {
    "name": "Work Up",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 30,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["Snatch"],
    "hit_effect": {
      "boosts": {
        "atk": 1,
        "spa": 1
      }
    }
  },
  "electroweb": {
    "name": "Electroweb",
    "category": "Special",
    "primary_type": "Electric",
    "pp": 15,
    "accuracy": 95,
    "base_power": 55,
    "target": "AllAdjacentFoes",
    "flags": ["Mirror", "Protect"],
    "secondary_effects": [
      {
        "target": {
          "boosts": {
            "spe": -1
          }
        }
      }
    ]
  },
  "wildcharge": {
    "name": "Wild Charge",
    "category": "Physical",
    "primary_type": "Electric",
    "pp": 15,
    "accuracy": 100,
    "base_power": 90,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "recoil_percent": "1/4"
  },
  "drillrun": {
    "name": "Drill Run",
    "category": "Physical",
    "primary_type": "Ground",
    "pp": 10,
    "accuracy": 95,
    "base_power": 80,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "crit_ratio": 2
  },
  "dualchop": {
    "name": "Dual Chop",
    "category": "Physical",
    "primary_type": "Dragon",
    "pp": 15,
    "accuracy": 90,
    "base_power": 40,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "multihit": 2,
    "max_move": { "base_power": 130 }
  },
  "heartstamp": {
    "name": "Heart Stamp",
    "category": "Physical",
    "primary_type": "Psychic",
    "pp": 25,
    "accuracy": 100,
    "base_power": 60,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "secondary_effects": [
      {
        "chance": "30%",
        "target": {
          "volatile_status": "flinch"
        }
      }
    ]
  },
  "hornleech": {
    "name": "Horn Leech",
    "category": "Physical",
    "primary_type": "Grass",
    "pp": 10,
    "accuracy": 100,
    "base_power": 75,
    "target": "Normal",
    "flags": ["Contact", "Heal", "Mirror", "Protect"],
    "drain_percent": "1/2"
  },
  "sacredsword": {
    "name": "Sacred Sword",
    "category": "Physical",
    "primary_type": "Fighting",
    "pp": 15,
    "accuracy": 100,
    "base_power": 90,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect", "Slicing"],
    "ignore_defensive": true,
    "ignore_evasion": true
  },
  "razorshell": {
    "name": "Razor Shell",
    "category": "Physical",
    "primary_type": "Water",
    "pp": 10,
    "accuracy": 95,
    "base_power": 75,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect", "Slicing"],
    "secondary_effects": [
      {
        "chance": "50%",
        "target": {
          "boosts": {
            "def": -1
          }
        }
      }
    ]
  },
  "heatcrash": {
    "name": "Heat Crash",
    "category": "Physical",
    "primary_type": "Fire",
    "pp": 10,
    "accuracy": 100,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "max_move": { "base_power": 130 },
    "effect": {
      "delegates": ["move:heavyslam"]
    }
  },
  "leaftornado": {
    "name": "Leaf Tornado",
    "category": "Special",
    "primary_type": "Grass",
    "pp": 10,
    "accuracy": 90,
    "base_power": 65,
    "target": "Normal",
    "flags": ["AccuracyLowering", "Mirror", "Protect"],
    "secondary_effects": [
      {
        "chance": "50%",
        "target": {
          "boosts": {
            "acc": -1
          }
        }
      }
    ]
  },
  "steamroller": {
    "name": "Steamroller",
    "category": "Physical",
    "primary_type": "Bug",
    "pp": 20,
    "accuracy": 100,
    "base_power": 65,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "secondary_effects": [
      {
        "chance": "30%",
        "target": {
          "volatile_status": "flinch"
        }
      }
    ]
  },
  "cottonguard": {
    "name": "Cotton Guard",
    "category": "Status",
    "primary_type": "Grass",
    "pp": 10,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["Snatch"],
    "hit_effect": {
      "boosts": {
        "def": 3
      }
    }
  },
  "nightdaze": {
    "name": "Night Daze",
    "category": "Special",
    "primary_type": "Dark",
    "pp": 10,
    "accuracy": 95,
    "base_power": 85,
    "target": "Normal",
    "flags": ["AccuracyLowering", "Mirror", "Protect"],
    "secondary_effects": [
      {
        "chance": "40%",
        "target": {
          "boosts": {
            "acc": -1
          }
        }
      }
    ]
  },
  "psystrike": {
    "name": "Psystrike",
    "category": "Special",
    "primary_type": "Psychic",
    "pp": 10,
    "accuracy": 100,
    "base_power": 100,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "override_defensive_stat": "def"
  },
  "tailslap": {
    "name": "Tail Slap",
    "category": "Physical",
    "primary_type": "Normal",
    "pp": 10,
    "accuracy": 85,
    "base_power": 25,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "multihit": [2, 5],
    "max_move": { "base_power": 130 }
  },
  "hurricane": {
    "name": "Hurricane",
    "category": "Special",
    "primary_type": "Flying",
    "pp": 10,
    "accuracy": 70,
    "base_power": 110,
    "target": "Any",
    "flags": ["Distance", "Mirror", "Protect", "Wind"],
    "secondary_effects": [
      {
        "chance": "30%",
        "target": {
          "volatile_status": "confusion"
        }
      }
    ],
    "effect": {
      "delegates": ["move:thunder"]
    }
  },
  "headcharge": {
    "name": "Head Charge",
    "category": "Physical",
    "primary_type": "Normal",
    "pp": 15,
    "accuracy": 100,
    "base_power": 120,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "recoil_percent": "1/4"
  },
  "geargrind": {
    "name": "Gear Grind",
    "category": "Physical",
    "primary_type": "Steel",
    "pp": 15,
    "accuracy": 85,
    "base_power": 50,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "multihit": 2,
    "max_move": { "base_power": 130 }
  },
  "searingshot": {
    "name": "Searing Shot",
    "category": "Special",
    "primary_type": "Fire",
    "pp": 5,
    "accuracy": 100,
    "base_power": 100,
    "target": "AllAdjacent",
    "flags": ["Bullet", "Mirror", "Protect"],
    "secondary_effects": [
      {
        "chance": "30%",
        "target": {
          "status": "brn"
        }
      }
    ]
  },
  "technoblast": {
    "name": "Techno Blast",
    "category": "Special",
    "primary_type": "Normal",
    "pp": 5,
    "accuracy": 100,
    "base_power": 120,
    "target": "Normal",
    "flags": ["Mirror", "NoMetronome", "Protect"],
    "effect": {
      "callbacks": {
        "on_modify_move_type": [
          "$item = $user.effective_item",
          "if !$item:",
          ["return"],
          "$data = func_call(special_item_data: $item)",
          "if !$data or !$data.techno_blast:",
          ["return"],
          "return $data.techno_blast.type"
        ]
      }
    }
  },
  "relicsong": {
    "name": "Relic Song",
    "category": "Special",
    "primary_type": "Normal",
    "pp": 10,
    "accuracy": 100,
    "base_power": 75,
    "target": "AllAdjacentFoes",
    "flags": [
      "BypassSubstitute",
      "Mirror",
      "NoMetronome",
      "Protect",
      "SleepInducing",
      "Sound"
    ],
    "effect": {
      "callbacks": {
        "on_hit": [
          "if func_call(base_species: $source) == meloetta and !$target.transformed:",
          ["$move.effect_state.change_forme = true"]
        ],
        "on_after_move": [
          "if $move.effect_state.change_forme:",
          [
            "$forme = ''",
            "if $user.species == meloetta:",
            ["$forme = pirouette"],
            "forme_change: $user str('meloetta{}', $forme)"
          ]
        ]
      }
    }
  },
  "secretsword": {
    "name": "Secret Sword",
    "category": "Special",
    "primary_type": "Fighting",
    "pp": 10,
    "accuracy": 100,
    "base_power": 85,
    "target": "Normal",
    "flags": ["Mirror", "NoMetronome", "Protect", "Slicing"],
    "override_defensive_stat": "def"
  },
  "glaciate": {
    "name": "Glaciate",
    "category": "Special",
    "primary_type": "Ice",
    "pp": 10,
    "accuracy": 95,
    "base_power": 65,
    "target": "AllAdjacentFoes",
    "flags": ["Mirror", "Protect"],
    "secondary_effects": [
      {
        "target": {
          "boosts": {
            "spe": -1
          }
        }
      }
    ]
  },
  "boltstrike": {
    "name": "Bolt Strike",
    "category": "Physical",
    "primary_type": "Electric",
    "pp": 5,
    "accuracy": 85,
    "base_power": 130,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "secondary_effects": [
      {
        "chance": "20%",
        "target": {
          "status": "par"
        }
      }
    ]
  },
  "blueflare": {
    "name": "Blue Flare",
    "category": "Special",
    "primary_type": "Fire",
    "pp": 5,
    "accuracy": 85,
    "base_power": 130,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "secondary_effects": [
      {
        "chance": "20%",
        "target": {
          "status": "brn"
        }
      }
    ]
  },
  "fierydance": {
    "name": "Fiery Dance",
    "category": "Special",
    "primary_type": "Fire",
    "pp": 10,
    "accuracy": 100,
    "base_power": 80,
    "target": "Normal",
    "flags": ["Dance", "Mirror", "Protect"],
    "secondary_effects": [
      {
        "chance": "50%",
        "user": {
          "boosts": {
            "spa": 1
          }
        }
      }
    ]
  },
  "freezeshock": {
    "name": "Freeze Shock",
    "category": "Physical",
    "primary_type": "Ice",
    "pp": 5,
    "accuracy": 90,
    "base_power": 140,
    "target": "Normal",
    "flags": [
      "Charge",
      "FailInstruct",
      "Mirror",
      "NoMetronome",
      "NoSleepTalk",
      "Protect"
    ],
    "secondary_effects": [
      {
        "chance": "30%",
        "target": {
          "status": "par"
        }
      }
    ],
    "effect": {
      "delegates": ["condition:chargemovebase"]
    }
  },
  "iceburn": {
    "name": "Ice Burn",
    "category": "Special",
    "primary_type": "Ice",
    "pp": 5,
    "accuracy": 90,
    "base_power": 140,
    "target": "Normal",
    "flags": [
      "Charge",
      "FailInstruct",
      "Mirror",
      "NoMetronome",
      "NoSleepTalk",
      "Protect"
    ],
    "secondary_effects": [
      {
        "chance": "30%",
        "target": {
          "status": "brn"
        }
      }
    ],
    "effect": {
      "delegates": ["condition:chargemovebase"]
    }
  },
  "snarl": {
    "name": "Snarl",
    "category": "Special",
    "primary_type": "Dark",
    "pp": 15,
    "accuracy": 95,
    "base_power": 55,
    "target": "AllAdjacentFoes",
    "flags": ["BypassSubstitute", "Mirror", "NoMetronome", "Protect", "Sound"],
    "secondary_effects": [
      {
        "target": {
          "boosts": {
            "spa": -1
          }
        }
      }
    ]
  },
  "iciclecrash": {
    "name": "Icicle Crash",
    "category": "Physical",
    "primary_type": "Ice",
    "pp": 10,
    "accuracy": 90,
    "base_power": 85,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "secondary_effects": [
      {
        "chance": "30%",
        "target": {
          "volatile_status": "flinch"
        }
      }
    ]
  },
  "vcreate": {
    "name": "V-create",
    "category": "Physical",
    "primary_type": "Fire",
    "pp": 5,
    "accuracy": 95,
    "base_power": 180,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "NoMetronome", "Protect"],
    "user_effect": {
      "boosts": {
        "def": -1,
        "spd": -1,
        "spe": -1
      }
    }
  },
  "fusionflare": {
    "name": "Fusion Flare",
    "category": "Special",
    "primary_type": "Fire",
    "pp": 5,
    "accuracy": 100,
    "base_power": 100,
    "target": "Normal",
    "flags": ["Mirror", "Protect", "Thawing"],
    "effect": {
      "callbacks": {
        "on_base_power": [
          "if $battle.last_successful_move == fusionbolt:",
          ["return $base_power * 2"]
        ]
      }
    }
  },
  "fusionbolt": {
    "name": "Fusion Bolt",
    "category": "Physical",
    "primary_type": "Electric",
    "pp": 5,
    "accuracy": 100,
    "base_power": 100,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "effect": {
      "callbacks": {
        "on_base_power": [
          "if $battle.last_successful_move == fusionflare:",
          ["return $base_power * 2"]
        ]
      }
    }
  }
}
