{
  "fakeout": {
    "name": "Fake Out",
    "category": "Physical",
    "primary_type": "Normal",
    "pp": 10,
    "accuracy": 100,
    "base_power": 40,
    "priority": 3,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "secondary_effects": [
      {
        "target": {
          "volatile_status": "flinch"
        }
      }
    ],
    "effect": {
      "callbacks": {
        "on_try_use_move": ["if $user.active_turns > 1:", ["return false"]]
      }
    }
  },
  "uproar": {
    "name": "Uproar",
    "category": "Special",
    "primary_type": "Normal",
    "pp": 10,
    "accuracy": 100,
    "base_power": 90,
    "target": "RandomNormal",
    "flags": [
      "BypassSubstitute",
      "FailInstruct",
      "Mirror",
      "NoSleepTalk",
      "Protect",
      "Sound"
    ],
    "user_effect": {
      "volatile_status": "uproar"
    },
    "condition": {
      "duration": 3,
      "callbacks": {
        "on_start": [
          "log_start",
          "foreach $mon in func_call(all_active_mons):",
          [
            "if !$mon.is_soundproof and $mon.status == slp:",
            ["cure_status: $mon"]
          ]
        ],
        "on_residual": [
          "if $target.last_move.is_defined and $target.last_move.id == struggle:",
          ["remove_volatile: $target $this.id no_events"],
          "log_start: residual"
        ],
        "on_end": ["log_end"],
        "on_lock_move": ["return $this.id"],
        "on_any_set_status": [
          "if !$target.is_soundproof and $status.id == slp:",
          ["log_fail: $target $status from_effect", "return false"]
        ]
      }
    }
  },
  "stockpile": {
    "name": "Stockpile",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 20,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["Snatch"],
    "hit_effect": {
      "volatile_status": "stockpile"
    },
    "effect": {
      "callbacks": {
        "on_try_use_move": [
          "$stockpile_state = func_call(volatile_effect_state: $user $this.id)",
          "if $stockpile_state.is_defined and $stockpile_state.layers >= 3:",
          ["return false"]
        ]
      }
    },
    "condition": {
      "no_copy": true,
      "callbacks": {
        "on_start": [
          "$effect_state.layers = 1",
          "$effect_state.def = +0",
          "$effect_state.spd = +0",
          "log_start: str('count:{}', $effect_state.layers)",
          "$def = $target.boosts.def",
          "$spd = $target.boosts.spd",
          "boost: $target 'def:1' 'spd:1'",
          "if $def != $target.boosts.def:",
          ["$effect_state.def = -1"],
          "if $spd != $target.boosts.spd:",
          ["$effect_state.spd = -1"]
        ],
        "on_restart": [
          "if $effect_state.layers >= 3:",
          ["return false"],
          "$effect_state.layers = $effect_state.layers + 1",
          "log_start: str('count:{}', $effect_state.layers)",
          "$def = $target.boosts.def",
          "$spd = $target.boosts.spd",
          "boost: $target 'def:1' 'spd:1'",
          "if $def != $target.boosts.def:",
          ["$effect_state.def = $effect_state.def - 1"],
          "if $spd != $target.boosts.spd:",
          ["$effect_state.spd = $effect_state.spd - 1"],
          "return true"
        ],
        "on_end": [
          "if $effect_state.def != 0 or $effect_state.spd != 0:",
          [
            "$boosts = func_call(boost_table)",
            "$boosts.def = $effect_state.def",
            "$boosts.spd = $effect_state.spd",
            "boost: $target $boosts"
          ],
          "log_end"
        ]
      }
    }
  },
  "spitup": {
    "name": "Spit Up",
    "category": "Special",
    "primary_type": "Normal",
    "pp": 10,
    "accuracy": 100,
    "target": "Normal",
    "flags": ["Protect"],
    "effect": {
      "callbacks": {
        "on_try_use_move": ["return func_call(has_volatile: $user stockpile)"],
        "on_move_base_power": [
          "$stockpile_state = func_call(volatile_effect_state: $source stockpile)",
          "if !$stockpile_state:",
          ["return 0"],
          "return $stockpile_state.layers * 100"
        ],
        "on_after_move": ["remove_volatile: $user stockpile"]
      }
    }
  },
  "swallow": {
    "name": "Swallow",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 10,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["Heal", "Snatch"],
    "effect": {
      "callbacks": {
        "on_try_use_move": ["return func_call(has_volatile: $user stockpile)"],
        "on_hit": [
          "$stockpile_state = func_call(volatile_effect_state: $source stockpile)",
          "if !$stockpile_state:",
          ["return false"],
          "if $stockpile_state.layers <= 1:",
          ["$heal_percent = 1/4"],
          "else if $stockpile_state.layers == 2:",
          ["$heal_percent = 1/2"],
          "else:",
          ["$heal_percent = 1"],
          "$heal_amount = $target.max_hp * $heal_percent",
          "if !func_call(heal: $target $heal_amount):",
          ["return false"],
          "remove_volatile: $target stockpile"
        ]
      }
    }
  },
  "heatwave": {
    "name": "Heat Wave",
    "category": "Special",
    "primary_type": "Fire",
    "pp": 10,
    "accuracy": 90,
    "base_power": 95,
    "target": "AllAdjacentFoes",
    "flags": ["Mirror", "Protect", "Wind"],
    "secondary_effects": [
      {
        "chance": "10%",
        "target": {
          "status": "brn"
        }
      }
    ]
  },
  "hail": {
    "name": "Hail",
    "category": "Status",
    "primary_type": "Ice",
    "pp": 10,
    "accuracy": "exempt",
    "target": "All",
    "flags": [],
    "hit_effect": {
      "weather": "hailweather"
    }
  },
  "torment": {
    "name": "Torment",
    "category": "Status",
    "primary_type": "Dark",
    "pp": 15,
    "accuracy": 100,
    "target": "Normal",
    "flags": ["BypassSubstitute", "Mirror", "Protect", "Reflectable"],
    "hit_effect": {
      "volatile_status": "torment"
    },
    "condition": {
      "no_copy": true,
      "callbacks": {
        "on_start": ["log_start"],
        "on_end": ["log_end"],
        "on_disable_move": [
          "if $mon.last_move.is_defined and $mon.last_move.id != struggle:",
          ["disable_move: $mon $mon.last_move.id"]
        ]
      }
    }
  },
  "flatter": {
    "name": "Flatter",
    "category": "Status",
    "primary_type": "Dark",
    "pp": 15,
    "accuracy": 100,
    "target": "Normal",
    "flags": ["Mirror", "Protect", "Reflectable"],
    "hit_effect": {
      "boosts": {
        "spa": 1
      },
      "volatile_status": "confusion"
    }
  },
  "willowisp": {
    "name": "Will-O-Wisp",
    "category": "Status",
    "primary_type": "Fire",
    "pp": 15,
    "accuracy": 85,
    "target": "Normal",
    "flags": ["Mirror", "Protect", "Reflectable"],
    "hit_effect": { "status": "brn" }
  },
  "memento": {
    "name": "Memento",
    "category": "Status",
    "primary_type": "Dark",
    "pp": 10,
    "accuracy": 100,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "self_destruct": "ifhit",
    "hit_effect": { "boosts": { "atk": -2, "spa": -2 } }
  },
  "facade": {
    "name": "Facade",
    "category": "Physical",
    "primary_type": "Normal",
    "pp": 20,
    "accuracy": 100,
    "base_power": 70,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "effect": {
      "callbacks": {
        "on_move_base_power": [
          "if [psn, tox, par, brn] has $source.status:",
          ["return $move.base_power * 2"]
        ]
      }
    }
  },
  "focuspunch": {
    "name": "Focus Punch",
    "category": "Physical",
    "primary_type": "Fighting",
    "pp": 20,
    "accuracy": 100,
    "base_power": 150,
    "priority": -3,
    "target": "Normal",
    "flags": [
      "Contact",
      "FailCopycat",
      "FailInstruct",
      "FailMeFirst",
      "NoAssist",
      "NoMetronome",
      "NoSleepTalk",
      "Protect",
      "Punch"
    ],
    "effect": {
      "callbacks": {
        "on_priority_charge_move": ["add_volatile: $mon $this.id"],
        "on_before_move": [
          "$volatile_state = func_call(volatile_effect_state: $user $this.id)",
          "if !$volatile_state or $volatile_state.lost_focus:",
          ["log_cant", "return false"]
        ]
      }
    },
    "condition": {
      "duration": 1,
      "callbacks": {
        "on_start": [
          "$effect_state.lost_focus = false",
          "log_single_turn: with_target"
        ],
        "on_hit": [
          "if $move.category != status:",
          ["$effect_state.lost_focus = true"]
        ],
        "on_add_volatile": ["if $volatile.id == flinch:", ["return false"]]
      }
    }
  },
  "smellingsalts": {
    "name": "Smelling Salts",
    "category": "Physical",
    "primary_type": "Normal",
    "pp": 10,
    "accuracy": 100,
    "base_power": 70,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "effect": {
      "callbacks": {
        "on_move_base_power": [
          "if $target.status == par:",
          ["return $move.base_power * 2"]
        ],
        "on_hit": ["if $target.status == par:", ["cure_status: $target"]]
      }
    }
  },
  "followme": {
    "name": "Follow Me",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 20,
    "accuracy": "exempt",
    "priority": 2,
    "target": "User",
    "flags": ["FailCopycat", "NoAssist", "NoMetronome"],
    "hit_effect": {
      "volatile_status": "followme"
    },
    "effect": {
      "callbacks": {
        "on_try_use_move": ["return $format.mons_per_side > 1"]
      }
    },
    "condition": {
      "duration": 1,
      "callbacks": {
        "on_start": ["log_single_turn: with_target"],
        "on_foe_redirect_target": {
          "priority": 1,
          "program": [
            "if $effect_state.target.is_sky_dropped:",
            ["return"],
            "if !func_call(valid_target: $user $effect_state.target $move.target):",
            ["return"],
            "return $effect_state.target"
          ]
        }
      }
    }
  },
  "naturepower": {
    "name": "Nature Power",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 20,
    "accuracy": "exempt",
    "target": "Normal",
    "flags": [
      "FailCopycat",
      "FailEncore",
      "FailInstruct",
      "FailMimic",
      "NoAssist",
      "NoMetronome",
      "NoSleepTalk"
    ],
    "effect": {
      "callbacks": {
        "on_try_hit": [
          "$transformed_move = triattack",
          "$terrain = $source.effective_terrain",
          "if $terrain == electricterrain:",
          ["$transformed_move = thunderbolt"],
          "else if $terrain == grassyterrain:",
          ["$transformed_move = energyball"],
          "else if $terrain == mistyterrain:",
          ["$transformed_move = moonblast"],
          "else if $terrain == psychicterrain:",
          ["$transformed_move = psychic"],
          "else if $field.environment == cave:",
          ["$transformed_move = powergem"],
          "else if $field.environment == sand:",
          ["$transformed_move = earthpower"],
          "else if $field.environment == water:",
          ["$transformed_move = hydropump"],
          "else if $field.environment == ice:",
          ["$transformed_move = icebeam"],
          "else if $field.environment == sky:",
          ["$transformed_move = airslash"],
          "else if $field.environment == grass:",
          ["$transformed_move = energyball"],
          "else if $field.environment == volcano:",
          ["$transformed_move = lavaplume"],
          "use_move: $source $transformed_move $target",
          "return stop"
        ]
      }
    }
  },
  "charge": {
    "name": "Charge",
    "category": "Status",
    "primary_type": "Electric",
    "pp": 20,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["Snatch"],
    "hit_effect": {
      "volatile_status": "charge"
    },
    "condition": {
      "callbacks": {
        "on_start": [
          "if $source_effect.is_ability:",
          ["log_start: with_source_effect"],
          "else:",
          ["log_start"]
        ],
        "on_restart": [
          "if $source_effect.is_ability:",
          ["log_start: with_source_effect"],
          "else:",
          ["log_start"],
          "return true"
        ],
        "on_source_base_power": [
          "if $move.type == electric:",
          ["return $base_power * 2"]
        ],
        "on_move_aborted": [
          "if $move.type == electric and $move.id != $this.id:",
          ["remove_volatile: $user $this.id"]
        ],
        "on_after_move": [
          "if $move.type == electric and $move.id != $this.id:",
          ["remove_volatile: $user $this.id"]
        ],
        "on_end": ["log_end: silent"]
      }
    }
  },
  "taunt": {
    "name": "Taunt",
    "category": "Status",
    "primary_type": "Dark",
    "pp": 20,
    "accuracy": 100,
    "target": "Normal",
    "flags": ["BypassSubstitute", "Mirror", "Protect", "Reflectable"],
    "hit_effect": {
      "volatile_status": "taunt"
    },
    "condition": {
      "duration": 3,
      "callbacks": {
        "on_duration": ["if !$target.will_move_this_turn:", ["return 4"]],
        "on_start": ["log_start"],
        "on_end": ["log_end"],
        "on_disable_move": [
          "foreach $move_slot in $mon.move_slots:",
          [
            "$move = func_call(get_move: $move_slot.id)",
            "if $move.is_defined and $move.category == status and $move.id != mefirst:",
            ["disable_move: $mon $move.id"]
          ]
        ],
        "on_before_move": {
          "priority": 5,
          "program": [
            "if $move.category == status and $move.id != mefirst:",
            ["log_cant", "return false"]
          ]
        }
      }
    }
  },
  "helpinghand": {
    "name": "Helping Hand",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 20,
    "accuracy": "exempt",
    "priority": 5,
    "target": "AdjacentAlly",
    "flags": ["BypassSubstitute", "FailCopycat", "NoAssist", "NoMetronome"],
    "hit_effect": {
      "volatile_status": "helpinghand"
    },
    "effect": {
      "callbacks": {
        "on_try_hit": [
          "return $target.newly_switched or $target.will_move_this_turn"
        ]
      }
    },
    "condition": {
      "duration": 1,
      "callbacks": {
        "on_start": [
          "$effect_state.multiplier = 3/2",
          "log_single_turn: with_target with_source"
        ],
        "on_restart": [
          "$effect_state.multiplier = $effect_state.multiplier * 3/2",
          "log_single_turn: with_target with_source",
          "return true"
        ],
        "on_source_base_power": [
          "return $base_power * $effect_state.multiplier"
        ]
      }
    }
  },
  "trick": {
    "name": "Trick",
    "category": "Status",
    "primary_type": "Psychic",
    "pp": 10,
    "accuracy": 100,
    "target": "Normal",
    "flags": ["FailCopycat", "Mirror", "NoAssist", "NoMetronome", "Protect"],
    "effect": {
      "callbacks": {
        "on_try_immunity": [
          "return !func_call(has_ability: $target stickyhold)"
        ],
        "on_hit": [
          "if !$source.item and !$target.item:",
          ["return false"],
          "$target_item = func_call(take_item: $target)",
          "$source_item = func_call(take_item: $source)",
          "if $target_item.is_defined:",
          ["set_item: $source $target_item"],
          "if $source_item.is_defined:",
          ["set_item: $target $source_item"]
        ]
      }
    }
  },
  "roleplay": {
    "name": "Role Play",
    "category": "Status",
    "primary_type": "Psychic",
    "pp": 10,
    "accuracy": "exempt",
    "target": "Normal",
    "flags": ["BypassSubstitute"],
    "effect": {
      "callbacks": {
        "on_try_hit": [
          "if $source.ability == $target.ability:",
          ["return false"],
          "$target_ability = func_call(get_ability: $target.ability)",
          "$source_ability = func_call(get_ability: $source.ability)",
          "if func_call(ability_has_flag: $target_ability permanent) or func_call(ability_has_flag: $source_ability permanent) or func_call(ability_has_flag: $target_ability noroleplay):",
          ["return false"]
        ],
        "on_hit": [
          "if !func_call(set_ability: $source $target.ability use_target_as_source):",
          ["return false"]
        ]
      }
    }
  },
  "wish": {
    "name": "Wish",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 10,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["Heal", "Snatch"],
    "hit_effect": {
      "slot_condition": "wish"
    },
    "condition": {
      "duration": 2,
      "callbacks": {
        "on_slot_start": ["$effect_state.hp = $source.max_hp / 2"],
        "on_slot_end": [
          "$target = func_call(mon_in_position: $side $slot)",
          "if $target.is_defined and !$target.fainted:",
          ["heal: $target $effect_state.hp"]
        ]
      }
    }
  },
  "assist": {
    "name": "Assist",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 20,
    "accuracy": "exempt",
    "target": "User",
    "flags": [
      "FailCopycat",
      "FailEncore",
      "FailInstruct",
      "FailMimic",
      "NoAssist",
      "NoMetronome",
      "NoSleepTalk"
    ],
    "effect": {
      "callbacks": {
        "on_hit": [
          "$moves = []",
          "foreach $mon in func_call(all_mons_on_side: $target.side):",
          [
            "if $mon == $target:",
            ["continue"],
            "foreach $move_slot in $mon.move_slots:",
            [
              "$usable_move = func_call(get_move: $move_slot.id)",
              "if !$usable_move or func_call(move_has_flag: $usable_move noassist):",
              ["continue"],
              "$moves = func_call(append: $moves $usable_move.id)"
            ]
          ],
          "$random_move = func_call(sample: $moves)",
          "if !$random_move:",
          ["return false"],
          "use_move: $target $random_move"
        ]
      }
    }
  },
  "ingrain": {
    "name": "Ingrain",
    "category": "Status",
    "primary_type": "Grass",
    "pp": 20,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["Snatch"],
    "hit_effect": {
      "volatile_status": "ingrain"
    },
    "condition": {
      "callbacks": {
        "is_grounded": {
          "order": 1,
          "program": ["return true"]
        },
        "on_start": ["log_start"],
        "on_residual": ["heal: $target expr($target.base_max_hp / 16)"],
        "on_trap_mon": ["return true"],
        "on_drag_out": ["log_activate: with_target", "return false"]
      }
    }
  },
  "superpower": {
    "name": "Superpower",
    "category": "Physical",
    "primary_type": "Fighting",
    "pp": 5,
    "accuracy": 100,
    "base_power": 120,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "user_effect": { "boosts": { "atk": -1, "def": -1 } }
  },
  "magiccoat": {
    "name": "Magic Coat",
    "category": "Status",
    "primary_type": "Psychic",
    "pp": 15,
    "accuracy": "exempt",
    "priority": 4,
    "target": "User",
    "flags": [],
    "hit_effect": {
      "volatile_status": "magiccoat"
    },
    "condition": {
      "duration": 1,
      "callbacks": {
        "on_start": ["log_single_turn: with_target"],
        "on_try_hit": [
          "if $target == $source or $move.reflected or !func_call(move_has_flag: $move reflectable):",
          ["return"],
          "log_activate: with_target",
          "do_not_animate_last_move",
          "$reflected_move = func_call(new_active_move: $move.id)",
          "$reflected_move.reflected = true",
          "use_active_move: $target $reflected_move $source",
          "return stop"
        ],
        "on_side_try_hit_side": [
          "if $source.side == $side or $move.reflected or !func_call(move_has_flag: $move reflectable):",
          ["return"],
          "log_activate: with_target use_effect_state_source",
          "do_not_animate_last_move",
          "$reflected_move = func_call(new_active_move: $move.id)",
          "$reflected_move.reflected = true",
          "use_active_move: $effect_state.source $reflected_move $source",
          "return stop"
        ]
      }
    }
  },
  "recycle": {
    "name": "Recycle",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 10,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["Snatch"],
    "effect": {
      "callbacks": {
        "on_hit": [
          "if $target.item.is_defined or !$target.last_item:",
          ["return false"],
          "$item = $target.last_item",
          "$target.last_item = undefined",
          "set_item: $target $item"
        ]
      }
    }
  },
  "revenge": {
    "name": "Revenge",
    "category": "Physical",
    "primary_type": "Fighting",
    "pp": 10,
    "accuracy": 100,
    "base_power": 60,
    "priority": -4,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "effect": {
      "callbacks": {
        "on_move_base_power": [
          "$attacked_by_target = func_call(received_attack: $source $target has_damage this_turn)",
          "if $attacked_by_target:",
          ["return $move.base_power * 2"]
        ]
      }
    }
  },
  "brickbreak": {
    "name": "Brick Break",
    "category": "Physical",
    "primary_type": "Fighting",
    "pp": 15,
    "accuracy": 100,
    "base_power": 75,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "effect": {
      "callbacks": {
        "on_try_hit": [
          "remove_side_condition: $target.side reflect",
          "remove_side_condition: $target.side lightscreen",
          "remove_side_condition: $target.side auroraveil"
        ]
      }
    }
  },
  "yawn": {
    "name": "Yawn",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 10,
    "accuracy": "exempt",
    "target": "Normal",
    "flags": ["Mirror", "Protect", "Reflectable", "SleepInducing"],
    "hit_effect": {
      "volatile_status": "yawn"
    },
    "effect": {
      "callbacks": {
        "on_try_hit": [
          "if $target.status.is_defined or func_call(check_immunity: $target slp):",
          ["return false"]
        ]
      }
    },
    "condition": {
      "no_copy": true,
      "duration": 2,
      "callbacks": {
        "on_start": ["log_start: with_source"],
        "on_end": [
          "log_end: silent",
          "set_status: $target slp $effect_state.source"
        ]
      }
    }
  },
  "knockoff": {
    "name": "Knock Off",
    "category": "Physical",
    "primary_type": "Dark",
    "pp": 20,
    "accuracy": 100,
    "base_power": 65,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "effect": {
      "callbacks": {
        "on_move_base_power": [
          "$item = func_call(take_item: $target dry_run)",
          "if !$item:",
          ["return"],
          "return $move.base_power * 3/2"
        ],
        "on_after_hit": [
          "if $source.hp == 0:",
          ["return"],
          "take_item: $target"
        ]
      }
    }
  },
  "endeavor": {
    "name": "Endeavor",
    "category": "Physical",
    "primary_type": "Normal",
    "pp": 5,
    "accuracy": 100,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "NoParentalBond", "Protect"],
    "effect": {
      "callbacks": {
        "on_try_hit": ["return $source.hp < $target.hp"],
        "on_move_damage": ["return $target.hp - $source.hp"]
      }
    }
  },
  "eruption": {
    "name": "Eruption",
    "category": "Special",
    "primary_type": "Fire",
    "pp": 5,
    "accuracy": 100,
    "base_power": 150,
    "target": "AllAdjacentFoes",
    "flags": ["Mirror", "Protect"],
    "effect": {
      "callbacks": {
        "on_move_base_power": [
          "return $move.base_power * $source.hp / $source.max_hp"
        ]
      }
    }
  },
  "skillswap": {
    "name": "Skill Swap",
    "category": "Status",
    "primary_type": "Psychic",
    "pp": 10,
    "accuracy": "exempt",
    "target": "Normal",
    "flags": ["BypassSubstitute", "Mirror", "Protect"],
    "effect": {
      "callbacks": {
        "on_try_hit": [
          "$target_ability = func_call(get_ability: $target.ability)",
          "$source_ability = func_call(get_ability: $source.ability)",
          "if func_call(ability_has_flag: $target_ability permanent) or func_call(ability_has_flag: $source_ability permanent) or func_call(ability_has_flag: $target_ability noskillswap) or func_call(ability_has_flag: $source_ability noskillswap):",
          ["return false"],
          "if !func_call(set_ability: $source $target_ability.id use_target_as_source dry_run):",
          ["return false"],
          "if !func_call(set_ability: $target $source_ability.id dry_run):",
          ["return false"]
        ],
        "on_hit": [
          "$target_ability = func_call(get_ability: $target.ability)",
          "$source_ability = func_call(get_ability: $source.ability)",
          "log_activate: with_target with_source",
          "$allies = func_call(is_ally: $target $source)",
          "if $allies:",
          [
            "set_ability: $source $target_ability.id use_target_as_source silent",
            "set_ability: $target $source_ability.id silent"
          ],
          "else:",
          [
            "set_ability: $source $target_ability.id use_target_as_source",
            "set_ability: $target $source_ability.id"
          ]
        ]
      }
    }
  },
  "imprison": {
    "name": "Imprison",
    "category": "Status",
    "primary_type": "Psychic",
    "pp": 10,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["BypassSubstitute", "MustPressure", "Snatch"],
    "hit_effect": {
      "volatile_status": "imprison"
    },
    "condition": {
      "no_copy": true,
      "callbacks": {
        "on_start": ["log_start"],
        "on_foe_disable_move": [
          "foreach $move_slot in $mon.move_slots:",
          [
            "if func_call(has_move: $effect_state.source $move_slot.id):",
            ["disable_move: $mon $move_slot.id"]
          ]
        ],
        "on_foe_before_move": [
          "if $move.id != struggle and func_call(has_move: $effect_state.source $move.id):",
          ["log_cant", "return false"]
        ]
      }
    }
  },
  "refresh": {
    "name": "Refresh",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 20,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["Snatch"],
    "effect": {
      "callbacks": {
        "on_hit": [
          "if !$target.status or ([slp, frz] has $target.status):",
          ["return false"],
          "cure_status: $target"
        ]
      }
    }
  },
  "grudge": {
    "name": "Grudge",
    "category": "Status",
    "primary_type": "Ghost",
    "pp": 5,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["BypassSubstitute"],
    "hit_effect": {
      "volatile_status": "grudge"
    },
    "condition": {
      "callbacks": {
        "on_start": ["log_single_move: with_target"],
        "on_faint": [
          "if !$source or $source.fainted or !$effect:",
          ["return"],
          "if !$effect.is_move or func_call(move_has_flag: $effect future) or !$source.last_move.is_defined:",
          ["return"],
          "$last_move = $source.last_move",
          "set_pp: $source $last_move.id 0",
          "log_activate: with_source str('affected:{}', $last_move.name)"
        ],
        "on_before_move": ["remove_volatile: $user $this.id"]
      }
    }
  },
  "snatch": {
    "name": "Snatch",
    "category": "Status",
    "primary_type": "Dark",
    "pp": 10,
    "accuracy": "exempt",
    "priority": 4,
    "target": "User",
    "flags": [
      "BypassSubstitute",
      "FailCopycat",
      "MustPressure",
      "NoAssist",
      "NoMetronome"
    ],
    "hit_effect": {
      "volatile_status": "snatch"
    },
    "condition": {
      "duration": 1,
      "callbacks": {
        "log_start": ["log_single_turn"],
        "on_any_prepare_hit": [
          "if !func_call(move_has_flag: $move snatch) or ($move.source_effect.is_defined and $move.source_effect.id == $this.id):",
          ["return"],
          "$snatch_user = $effect_state.source",
          "log_activate: with_target use_effect_state_source",
          "remove_volatile: $snatch_user $this.id",
          "use_move: $snatch_user $move.id",
          "return stop"
        ]
      }
    }
  },
  "secretpower": {
    "name": "Secret Power",
    "category": "Physical",
    "primary_type": "Normal",
    "pp": 20,
    "accuracy": 100,
    "base_power": 70,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "effect": {
      "callbacks": {
        "on_use_move": [
          "$secondary_effect = func_call(secondary_hit_effect)",
          "$secondary_effect.chance = 30/100",
          "$secondary_effect.target = func_call(hit_effect)",
          "$terrain = $user.effective_terrain",
          "if $terrain == electricterrain:",
          ["$secondary_effect.target.status = par"],
          "else if $terrain == grassyterrain:",
          ["$secondary_effect.target.status = slp"],
          "else if $terrain == mistyterrain:",
          [
            "$secondary_effect.target.boosts = func_call(boost_table: 'spa:-1')"
          ],
          "else if $terrain == psychicterrain:",
          [
            "$secondary_effect.target.boosts = func_call(boost_table: 'spe:-1')"
          ],
          "else if $field.environment == cave:",
          ["$secondary_effect.target.volatile_status = flinch"],
          "else if $field.environment == sand:",
          [
            "$secondary_effect.target.boosts = func_call(boost_table: 'acc:-1')"
          ],
          "else if $field.environment == water:",
          [
            "$secondary_effect.target.boosts = func_call(boost_table: 'atk:-'1')"
          ],
          "else if $field.environment == ice:",
          ["$secondary_effect.target.status = frz"],
          "else if $field.environment == sky:",
          [
            "$secondary_effect.target.boosts = func_call(boost_table: 'spe:-1')"
          ],
          "else if $field.environment == grass:",
          ["$secondary_effect.target.status = slp"],
          "else if $field.environment == volcano:",
          ["$secondary_effect.target.status = brn"],
          "else:",
          ["$secondary_effect.target.status = par"],
          "add_secondary_effect_to_move: $move $secondary_effect"
        ]
      }
    }
  },
  "dive": {
    "name": "Dive",
    "category": "Physical",
    "primary_type": "Water",
    "pp": 10,
    "accuracy": 100,
    "base_power": 80,
    "target": "Normal",
    "flags": [
      "Charge",
      "Contact",
      "FailInstruct",
      "Mirror",
      "NoAssist",
      "NoSleepTalk",
      "Protect"
    ],
    "effect": {
      "callbacks": {
        "on_try_use_move": [
          "if func_call(remove_volatile: $user $this.id):",
          ["return"],
          "log_prepare_move",
          "if !func_call(run_event: ChargeMove):",
          ["return"],
          "add_volatile: $user twoturnmove",
          "return stop"
        ]
      }
    },
    "condition": {
      "duration": 2,
      "callbacks": {
        "is_semi_invulnerable": ["return true"],
        "on_immunity": [
          "if $effect.id == sandstormweather or $effect.id == hailweather:",
          ["return false"]
        ],
        "on_invulnerability": [
          "if [surf, whirlpool] has $move.id:",
          ["return"],
          "return false"
        ],
        "on_source_modify_damage": [
          "if [surf, whirlpool] has $move.id:",
          ["return $damage * 2"]
        ]
      }
    }
  },
  "armthrust": {
    "name": "Arm Thrust",
    "category": "Physical",
    "primary_type": "Fighting",
    "pp": 20,
    "accuracy": 100,
    "base_power": 15,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "multihit": [2, 5]
  },
  "camouflage": {
    "name": "Camouflage",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 20,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["Snatch"],
    "effect": {
      "callbacks": {
        "on_hit": [
          "$type = normal",
          "$terrain = $target.effective_terrain",
          "if $terrain == electricterrain:",
          ["$type = electric"],
          "else if $terrain == grassyterrain:",
          ["$type = grass"],
          "else if $terrain == mistyterrain:",
          ["$type = fairy"],
          "else if $terrain == psychicterrain:",
          ["$type = psychic"],
          "else if $field.environment == cave:",
          ["$type = rock"],
          "else if $field.environment == sand:",
          ["$type = ground"],
          "else if $field.environment == water:",
          ["$type = water"],
          "else if $field.environment == ice:",
          ["$type = ice"],
          "else if $field.environment == sky:",
          ["$type = flying"],
          "else if $field.environment == grass:",
          ["$type = grass"],
          "else if $field.environment == volcano:",
          ["$type = fire"],
          "set_types: $target $type"
        ]
      }
    }
  },
  "tailglow": {
    "name": "Tail Glow",
    "category": "Status",
    "primary_type": "Bug",
    "pp": 20,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["Snatch"],
    "hit_effect": {
      "boosts": {
        "spa": 3
      }
    }
  },
  "lusterpurge": {
    "name": "Luster Purge",
    "category": "Special",
    "primary_type": "Psychic",
    "pp": 5,
    "accuracy": 100,
    "base_power": 95,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "secondary_effects": [
      {
        "chance": "50%",
        "target": {
          "boosts": {
            "spd": -1
          }
        }
      }
    ]
  },
  "mistball": {
    "name": "Mist Ball",
    "category": "Special",
    "primary_type": "Psychic",
    "pp": 5,
    "accuracy": 100,
    "base_power": 95,
    "target": "Normal",
    "flags": ["Bullet", "Mirror", "Protect"],
    "secondary_effects": [
      {
        "chance": "50%",
        "target": {
          "boosts": {
            "spd": -1
          }
        }
      }
    ]
  },
  "featherdance": {
    "name": "Feather Dance",
    "category": "Status",
    "primary_type": "Flying",
    "pp": 15,
    "accuracy": 100,
    "target": "Normal",
    "flags": ["Dance", "Mirror", "Protect", "Reflectable"],
    "hit_effect": {
      "boosts": {
        "atk": -2
      }
    }
  },
  "teeterdance": {
    "name": "Teeter Dance",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 20,
    "accuracy": 100,
    "target": "AllAdjacent",
    "flags": ["Dance", "Mirror", "Protect"],
    "hit_effect": {
      "volatile_status": "confusion"
    }
  },
  "blazekick": {
    "name": "Blaze Kick",
    "category": "Physical",
    "primary_type": "Fire",
    "pp": 10,
    "accuracy": 90,
    "base_power": 85,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "crit_ratio": 2,
    "secondary_effects": [
      {
        "chance": "10%",
        "target": {
          "status": "brn"
        }
      }
    ]
  },
  "mudsport": {
    "name": "Mud Sport",
    "category": "Status",
    "primary_type": "Ground",
    "pp": 15,
    "accuracy": "exempt",
    "target": "All",
    "flags": [],
    "hit_effect": {
      "pseudo_weather": "mudsport"
    },
    "condition": {
      "duration": 5,
      "callbacks": {
        "on_field_start": ["log_field_start: with_source"],
        "on_base_power": [
          "if $move.type == electric:",
          ["return $base_power / 3"]
        ],
        "on_field_end": ["log_field_end"]
      }
    }
  },
  "iceball": {
    "name": "Ice Ball",
    "category": "Physical",
    "primary_type": "Ice",
    "pp": 20,
    "accuracy": 90,
    "base_power": 30,
    "target": "Normal",
    "flags": [
      "Bullet",
      "Contact",
      "FailInstruct",
      "Mirror",
      "NoParentalBond",
      "Protect"
    ],
    "effect": {
      "callbacks": {
        "on_move_base_power": [
          "$base_power = $move.base_power",
          "$rollout_state = func_call(volatile_effect_state: $source $this.id)",
          "if $rollout_state.is_defined:",
          [
            "$base_power = $base_power * 2 ^ $rollout_state.hit_count",
            "# Update the hit count for the next use of the move.",
            "$rollout_state.hit_count = $rollout_state.hit_count + 1",
            "# If we are not on the last hit, update the duration to keep us locked into this move.",
            "# The reason for manually updating the duration is that if the next use of the move is interrupted, the move will end by default.",
            "if $rollout_state.hit_count < 5:",
            ["$rollout_state.duration = 2"]
          ],
          "if func_call(has_volatile: $source defensecurl):",
          ["$base_power = $base_power * 2"],
          "return $base_power"
        ],
        "on_use_move": ["add_volatile: $user $this.id"]
      }
    },
    "condition": {
      "duration": 1,
      "callbacks": {
        "on_start": ["$effect_state.hit_count = 0"],
        "on_residual": [
          "if $target.last_move.is_defined and $target.last_move.id == struggle:",
          ["remove_volatile: $target $this.id"]
        ],
        "on_lock_move": ["return $this.id"]
      }
    }
  },
  "needlearm": {
    "name": "Needle Arm",
    "category": "Physical",
    "primary_type": "Grass",
    "pp": 15,
    "accuracy": 100,
    "base_power": 60,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "secondary_effects": [
      {
        "chance": "30%",
        "target": {
          "volatile_status": "flinch"
        }
      }
    ]
  },
  "slackoff": {
    "name": "Slack Off",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 5,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["Heal", "Snatch"],
    "hit_effect": {
      "heal_percent": "50%"
    }
  },
  "hypervoice": {
    "name": "Hyper Voice",
    "category": "Special",
    "primary_type": "Normal",
    "pp": 10,
    "accuracy": 100,
    "base_power": 90,
    "target": "AllAdjacentFoes",
    "flags": ["BypassSubstitute", "Mirror", "Protect", "Sound"]
  },
  "poisonfang": {
    "name": "Poison Fang",
    "category": "Physical",
    "primary_type": "Poison",
    "pp": 15,
    "accuracy": 100,
    "base_power": 50,
    "target": "Normal",
    "flags": ["Bite", "Contact", "Mirror", "Protect"],
    "secondary_effects": [
      {
        "chance": "50%",
        "target": {
          "status": "tox"
        }
      }
    ]
  },
  "crushclaw": {
    "name": "Crush Claw",
    "category": "Physical",
    "primary_type": "Normal",
    "pp": 10,
    "accuracy": 95,
    "base_power": 75,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "secondary_effects": [
      {
        "chance": "50%",
        "target": {
          "boosts": {
            "def": -1
          }
        }
      }
    ]
  },
  "blastburn": {
    "name": "Blast Burn",
    "category": "Special",
    "primary_type": "Fire",
    "pp": 5,
    "accuracy": 90,
    "base_power": 150,
    "target": "Normal",
    "flags": ["Mirror", "Protect", "Recharge"],
    "user_effect": {
      "volatile_status": "mustrecharge"
    }
  },
  "hydrocannon": {
    "name": "Hydro Cannon",
    "category": "Special",
    "primary_type": "Water",
    "pp": 5,
    "accuracy": 90,
    "base_power": 150,
    "target": "Normal",
    "flags": ["Mirror", "Protect", "Recharge"],
    "user_effect": {
      "volatile_status": "mustrecharge"
    }
  },
  "meteormash": {
    "name": "Meteor Mash",
    "category": "Physical",
    "primary_type": "Steel",
    "pp": 10,
    "accuracy": 90,
    "base_power": 90,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect", "Punch"],
    "secondary_effects": [
      {
        "chance": "20%",
        "user": {
          "boosts": {
            "atk": 1
          }
        }
      }
    ]
  },
  "astonish": {
    "name": "Astonish",
    "category": "Physical",
    "primary_type": "Ghost",
    "pp": 15,
    "accuracy": 100,
    "base_power": 30,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "secondary_effects": [
      {
        "chance": "30%",
        "target": {
          "volatile_status": "flinch"
        }
      }
    ]
  },
  "weatherball": {
    "name": "Weather Ball",
    "category": "Special",
    "primary_type": "Normal",
    "pp": 10,
    "accuracy": 100,
    "base_power": 50,
    "target": "Normal",
    "flags": ["Bullet", "Mirror", "Protect"],
    "effect": {
      "callbacks": {
        "on_modify_type": [
          "$weather = $user.effective_weather",
          "if !$weather:",
          ["return"],
          "if $weather.is_sunny:",
          ["$move.type = fire"],
          "else if $weather.is_raining:",
          ["$move.type = water"],
          "else if $weather.is_snowing:",
          ["$move.type = ice"],
          "else if $weather.id == sandstormweather:",
          ["$move.type = rock"]
        ],
        "on_move_base_power": [
          "if $move.type != normal:",
          ["return $move.base_power * 2"]
        ]
      }
    }
  },
  "aromatherapy": {
    "name": "Aromatherapy",
    "category": "Status",
    "primary_type": "Grass",
    "pp": 5,
    "accuracy": "exempt",
    "target": "AllyTeam",
    "flags": ["Distance", "Snatch"],
    "effect": {
      "callbacks": {
        "on_hit_side": [
          "log_activate: with_source",
          "$success = false",
          "foreach $ally in func_call(all_mons_on_side: $source.side):",
          [
            "if $ally == $source or !$ally.is_behind_substitute or $move.infiltrates:",
            [
              "$cured = func_call(cure_status: $ally)",
              "$success = $success or $cured"
            ]
          ],
          "return $success"
        ]
      }
    }
  },
  "faketears": {
    "name": "Fake Tears",
    "category": "Status",
    "primary_type": "Dark",
    "pp": 20,
    "accuracy": 100,
    "target": "Normal",
    "flags": ["Mirror", "Protect", "Reflectable"],
    "hit_effect": { "boosts": { "spd": -2 } }
  },
  "aircutter": {
    "name": "Air Cutter",
    "category": "Special",
    "primary_type": "Flying",
    "pp": 25,
    "accuracy": 95,
    "base_power": 60,
    "target": "AllAdjacentFoes",
    "flags": ["Mirror", "Protect", "Slicing", "Wind"],
    "crit_ratio": 2
  },
  "overheat": {
    "name": "Overheat",
    "category": "Special",
    "primary_type": "Fire",
    "pp": 5,
    "accuracy": 90,
    "base_power": 130,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "user_effect": {
      "boosts": {
        "spa": -2
      }
    }
  },
  "odorsleuth": {
    "name": "Odor Sleuth",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 40,
    "accuracy": "exempt",
    "target": "Normal",
    "flags": ["BypassSubstitute", "Mirror", "Protect", "Reflectable"],
    "hit_effect": {
      "volatile_status": "foresight"
    }
  },
  "rocktomb": {
    "name": "Rock Tomb",
    "category": "Physical",
    "primary_type": "Rock",
    "pp": 15,
    "accuracy": 95,
    "base_power": 60,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "secondary_effects": [
      {
        "target": {
          "boosts": {
            "spe": -1
          }
        }
      }
    ]
  },
  "silverwind": {
    "name": "Silver Wind",
    "category": "Special",
    "primary_type": "Bug",
    "pp": 5,
    "accuracy": 100,
    "base_power": 60,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "secondary_effects": [
      {
        "chance": "10%",
        "user": {
          "boosts": {
            "atk": 1,
            "def": 1,
            "spa": 1,
            "spd": 1,
            "spe": 1
          }
        }
      }
    ]
  },
  "metalsound": {
    "name": "Metal Sound",
    "category": "Status",
    "primary_type": "Steel",
    "pp": 40,
    "accuracy": 85,
    "target": "Normal",
    "flags": ["BypassSubstitute", "Mirror", "Protect", "Reflectable", "Sound"],
    "hit_effect": {
      "boosts": {
        "spd": -2
      }
    }
  },
  "grasswhistle": {
    "name": "Grass Whistle",
    "category": "Status",
    "primary_type": "Grass",
    "pp": 15,
    "accuracy": 55,
    "target": "Normal",
    "flags": [
      "BypassSubstitute",
      "Mirror",
      "Protect",
      "Reflectable",
      "SleepInducing",
      "Sound"
    ],
    "hit_effect": {
      "status": "slp"
    }
  },
  "tickle": {
    "name": "Tickle",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 20,
    "accuracy": 100,
    "target": "Normal",
    "flags": ["Mirror", "Protect", "Reflectable"],
    "hit_effect": {
      "boosts": {
        "atk": -1,
        "def": -1
      }
    }
  },
  "cosmicpower": {
    "name": "Cosmic Power",
    "category": "Status",
    "primary_type": "Psychic",
    "pp": 20,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["Snatch"],
    "hit_effect": {
      "boosts": {
        "def": 1,
        "spd": 1
      }
    }
  },
  "waterspout": {
    "name": "Water Spout",
    "category": "Special",
    "primary_type": "Water",
    "pp": 5,
    "accuracy": 100,
    "base_power": 150,
    "target": "AllAdjacentFoes",
    "flags": ["Mirror", "Protect"],
    "effect": {
      "callbacks": {
        "on_move_base_power": [
          "return $move.base_power * $source.hp / $source.max_hp"
        ]
      }
    }
  },
  "signalbeam": {
    "name": "Signal Beam",
    "category": "Special",
    "primary_type": "Bug",
    "pp": 15,
    "accuracy": 100,
    "base_power": 75,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "secondary_effects": [
      { "target": { "chance": "10%", "volatile_status": "confusion" } }
    ]
  },
  "shadowpunch": {
    "name": "Shadow Punch",
    "category": "Physical",
    "primary_type": "Ghost",
    "pp": 20,
    "accuracy": "exempt",
    "base_power": 60,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect", "Punch"],
    "secondary_effects": [
      { "target": { "chance": "10%", "volatile_status": "flinch" } }
    ]
  },
  "extrasensory": {
    "name": "Extrasensory",
    "category": "Special",
    "primary_type": "Psychic",
    "pp": 20,
    "accuracy": 100,
    "base_power": 80,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "secondary_effects": [
      {
        "chance": "10%",
        "target": {
          "volatile_status": "flinch"
        }
      }
    ]
  },
  "skyuppercut": {
    "name": "Sky Uppercut",
    "category": "Physical",
    "primary_type": "Fighting",
    "pp": 15,
    "accuracy": 90,
    "base_power": 85,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect", "Punch"]
  },
  "sandtomb": {
    "name": "Sand Tomb",
    "category": "Physical",
    "primary_type": "Ground",
    "pp": 15,
    "accuracy": 85,
    "base_power": 35,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "hit_effect": { "volatile_status": "partiallytrapped" }
  },
  "sheercold": {
    "name": "Sheer Cold",
    "category": "Special",
    "primary_type": "Ice",
    "pp": 5,
    "accuracy": 30,
    "target": "Normal",
    "flags": ["Mirror", "OHKO", "Protect"],
    "ohko_type": "Ice"
  },
  "muddywater": {
    "name": "Muddy Water",
    "category": "Special",
    "primary_type": "Water",
    "pp": 10,
    "accuracy": 85,
    "base_power": 90,
    "target": "AllAdjacentFoes",
    "flags": ["AccuracyLowering", "Mirror", "Protect"],
    "secondary_effects": [
      { "chance": "30%", "target": { "boosts": { "acc": -1 } } }
    ]
  },
  "bulletseed": {
    "name": "Bullet Seed",
    "category": "Physical",
    "primary_type": "Grass",
    "pp": 30,
    "accuracy": 100,
    "base_power": 25,
    "target": "Normal",
    "flags": ["Bullet", "Mirror", "Protect"],
    "multihit": [2, 5]
  },
  "aerialace": {
    "name": "Aerial Ace",
    "category": "Physical",
    "primary_type": "Flying",
    "pp": 20,
    "accuracy": "exempt",
    "base_power": 60,
    "target": "Any",
    "flags": ["Contact", "Distance", "Mirror", "Protect", "Slicing"]
  },
  "iciclespear": {
    "name": "Icicle Spear",
    "category": "Physical",
    "primary_type": "Ice",
    "pp": 30,
    "accuracy": 100,
    "base_power": 25,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "multihit": [2, 5]
  },
  "irondefense": {
    "name": "Iron Defense",
    "category": "Status",
    "primary_type": "Steel",
    "pp": 15,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["Snatch"],
    "hit_effect": { "boosts": { "def": 2 } }
  },
  "block": {
    "name": "Block",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 5,
    "accuracy": "exempt",
    "target": "Normal",
    "flags": ["Mirror", "Reflectable"],
    "hit_effect": {
      "volatile_status": "trapped"
    }
  },
  "howl": {
    "name": "Howl",
    "category": "Status",
    "primary_type": "Normal",
    "pp": 40,
    "accuracy": "exempt",
    "target": "Allies",
    "flags": ["Snatch", "Sound"],
    "hit_effect": { "boosts": { "atk": 1 } }
  },
  "dragonclaw": {
    "name": "Dragon Claw",
    "category": "Physical",
    "primary_type": "Dragon",
    "pp": 15,
    "accuracy": 100,
    "base_power": 80,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"]
  },
  "frenzyplant": {
    "name": "Frenzy Plant",
    "category": "Special",
    "primary_type": "Grass",
    "pp": 5,
    "accuracy": 90,
    "base_power": 150,
    "target": "Normal",
    "flags": ["Mirror", "Protect", "Recharge"],
    "user_effect": {
      "volatile_status": "mustrecharge"
    }
  },
  "bulkup": {
    "name": "Bulk Up",
    "category": "Status",
    "primary_type": "Fighting",
    "pp": 20,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["Snatch"],
    "hit_effect": {
      "boosts": {
        "atk": 1,
        "def": 1
      }
    }
  },
  "bounce": {
    "name": "Bounce",
    "category": "Physical",
    "primary_type": "Flying",
    "pp": 5,
    "accuracy": 85,
    "base_power": 85,
    "target": "Any",
    "flags": [
      "Charge",
      "Contact",
      "Distance",
      "FailInstruct",
      "Gravity",
      "Mirror",
      "NoAssist",
      "NoSleepTalk",
      "Protect"
    ],
    "secondary_effects": [
      {
        "chance": "30%",
        "target": {
          "status": "par"
        }
      }
    ],
    "effect": {
      "callbacks": {
        "on_try_use_move": [
          "if func_call(remove_volatile: $user $this.id):",
          ["return"],
          "log_prepare_move",
          "if !func_call(run_event: ChargeMove):",
          ["return"],
          "add_volatile: $user twoturnmove",
          "return stop"
        ]
      }
    },
    "condition": {
      "duration": 2,
      "callbacks": {
        "is_semi_invulnerable": ["return true"],
        "on_invulnerability": [
          "if [gust, twister, skyuppercut, thunder, hurricane, smackdown, thousandarrows] has $move.id:",
          ["return"],
          "return false"
        ],
        "on_source_modify_damage": [
          "if [gust, twister] has $move.id:",
          ["return $damage * 2"]
        ]
      }
    }
  },
  "mudshot": {
    "name": "Mud Shot",
    "category": "Special",
    "primary_type": "Ground",
    "pp": 15,
    "accuracy": 95,
    "base_power": 55,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "secondary_effects": [
      {
        "target": {
          "boosts": {
            "spe": -1
          }
        }
      }
    ]
  },
  "poisontail": {
    "name": "Poison Tail",
    "category": "Physical",
    "primary_type": "Poison",
    "pp": 25,
    "accuracy": 100,
    "base_power": 50,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "crit_ratio": 2,
    "secondary_effects": [
      {
        "chance": "10%",
        "target": {
          "status": "psn"
        }
      }
    ]
  },
  "covet": {
    "name": "Covet",
    "category": "Physical",
    "primary_type": "Normal",
    "pp": 25,
    "accuracy": 100,
    "base_power": 60,
    "target": "Normal",
    "flags": [
      "Contact",
      "FailCopycat",
      "FailMeFirst",
      "Mirror",
      "NoAssist",
      "NoMetronome",
      "Protect"
    ],
    "effect": {
      "callbacks": {
        "on_after_hit": [
          "if $source.item.is_defined:",
          ["return"],
          "$item = func_call(take_item: $target silent)",
          "if !$item:",
          ["return"],
          "if !func_call(set_item: $source $item use_target_as_source):",
          ["return"]
        ]
      }
    }
  },
  "volttackle": {
    "name": "Volt Tackle",
    "category": "Physical",
    "primary_type": "Electric",
    "pp": 15,
    "accuracy": 100,
    "base_power": 120,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect"],
    "recoil_percent": "33%",
    "secondary_effects": [{ "chance": "10%", "target": { "status": "par" } }]
  },
  "magicalleaf": {
    "name": "Magical Leaf",
    "category": "Special",
    "primary_type": "Grass",
    "pp": 20,
    "accuracy": "exempt",
    "base_power": 60,
    "target": "Normal",
    "flags": ["Mirror", "Protect"]
  },
  "watersport": {
    "name": "Water Sport",
    "category": "Status",
    "primary_type": "Water",
    "pp": 15,
    "accuracy": "exempt",
    "target": "All",
    "flags": [],
    "hit_effect": {
      "pseudo_weather": "watersport"
    },
    "condition": {
      "duration": 5,
      "callbacks": {
        "on_field_start": ["log_field_start: with_source"],
        "on_base_power": ["if $move.type == fire:", ["return $base_power / 3"]],
        "on_field_end": ["log_field_end"]
      }
    }
  },
  "calmmind": {
    "name": "Calm Mind",
    "category": "Status",
    "primary_type": "Psychic",
    "pp": 20,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["Snatch"],
    "hit_effect": { "boosts": { "spa": 1, "spd": 1 } }
  },
  "leafblade": {
    "name": "Leaf Blade",
    "category": "Physical",
    "primary_type": "Grass",
    "pp": 15,
    "accuracy": 100,
    "base_power": 90,
    "target": "Normal",
    "flags": ["Contact", "Mirror", "Protect", "Slicing"],
    "crit_ratio": 2
  },
  "dragondance": {
    "name": "Dragon Dance",
    "category": "Status",
    "primary_type": "Dragon",
    "pp": 20,
    "accuracy": "exempt",
    "target": "User",
    "flags": ["Dance", "Snatch"],
    "hit_effect": {
      "boosts": {
        "atk": 1,
        "spe": 1
      }
    }
  },
  "rockblast": {
    "name": "Rock Blast",
    "category": "Physical",
    "primary_type": "Rock",
    "pp": 10,
    "accuracy": 90,
    "base_power": 25,
    "target": "Normal",
    "flags": ["Bullet", "Mirror", "Protect"],
    "multihit": [2, 5]
  },
  "shockwave": {
    "name": "Shock Wave",
    "category": "Special",
    "primary_type": "Electric",
    "pp": 20,
    "accuracy": "exempt",
    "base_power": 60,
    "target": "Normal",
    "flags": ["Mirror", "Protect"]
  },
  "waterpulse": {
    "name": "Water Pulse",
    "category": "Special",
    "primary_type": "Water",
    "pp": 20,
    "accuracy": 100,
    "base_power": 60,
    "target": "Any",
    "flags": ["Distance", "Mirror", "Protect", "Pulse"],
    "secondary_effects": [
      { "chance": "20%", "target": { "volatile_status": "confusion" } }
    ]
  },
  "doomdesire": {
    "name": "Doom Desire",
    "category": "Special",
    "primary_type": "Steel",
    "pp": 5,
    "accuracy": 100,
    "base_power": 140,
    "target": "Normal",
    "flags": ["Future"],
    "effect": {
      "callbacks": {
        "on_try_move": [
          "if !func_call(add_slot_condition: $target.side $target.position futuremove use_target_as_source):",
          ["return false"],
          "do_not_animate_last_move",
          "return stop"
        ]
      },
      "local_data": {
        "moves": {
          "futuremove": {
            "name": "Doom Desire",
            "category": "Special",
            "primary_type": "Steel",
            "accuracy": 100,
            "base_power": 140,
            "target": "Scripted",
            "flags": ["Future"]
          }
        }
      }
    }
  },
  "psychoboost": {
    "name": "Psycho Boost",
    "category": "Special",
    "primary_type": "Psychic",
    "pp": 5,
    "accuracy": 90,
    "base_power": 140,
    "target": "Normal",
    "flags": ["Mirror", "Protect"],
    "user_effect": {
      "boosts": {
        "spa": -2
      }
    }
  }
}
